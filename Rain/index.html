<canvas id="gc" width="800" height="800"></canvas>
<script>

var vars = {
	n_drops: 300,
}

var drops = [];

function createDrop (w, h) {
	return {
		x: Math.random() * w,
		y: Math.random() * h,
		yv: random(10,20),
		update: function () {
			this.y += this.yv;

			if (this.y > h) this.y = 0;
		},
		draw: function () {
			// Draw drops
			ctx.beginPath();
			ctx.moveTo(this.x, this.y);
			ctx.lineTo(this.x, this.y + 10);
			ctx.lineWidth = 2;
			ctx.strokeStyle = "#050580";
			ctx.stroke();
		}
	}
}

function loop () {
	update();
	draw();
}

function update () {
	for (var i = 0; i < vars.n_drops; ++i) {
		drops[i].update();
	}
}

function draw () {
	// Background
	ctx.fillStyle = "#E6E6FA";
	ctx.fillRect(0, 0, canv.width, canv.height);

	for (var i = 0; i < vars.n_drops; ++i) {
		drops[i].draw();
	}
}


window.onload = function () {
	canv = document.getElementById("gc");
	ctx = canv.getContext("2d");

	for (var i = 0; i < vars.n_drops; ++i) {
		drops[i] = createDrop(canv.width, canv.height);
	}

	setInterval(loop, 1000/30);
}

function random(min, max) {
  return Math.floor(Math.random() * (max - min + 1)) + min;
}

</script>